(this["webpackJsonpdual-n-back"]=this["webpackJsonpdual-n-back"]||[]).push([[0],{163:function(e,t,n){e.exports=n(366)},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},307:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},360:function(e,t){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(61),s=n.n(c),i=(n(168),n(169),n(8)),o=n(9),u=(n(170),n(3)),l=n(7),m=n(2);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(m.b)({name:"menu",initialState:{menuOpen:!1},reducers:{menuOpened:function(e){return p({},e,{menuOpen:!0})},menuClosed:function(e){return p({},e,{menuOpen:!1})}}}),b=f.actions,g=f.reducer,v=b.menuOpened,h=b.menuClosed,O=g,E=n(1),w=n.n(E),y=n(4);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=Object(m.b)({name:"request",initialState:{requesting:!1,finished:!1,success:!1,failed:!1,message:"",redirect:""},reducers:{requested:function(e,t){return N({},e,{requesting:!0,finished:!1,success:!1,failed:!1,message:"",redirect:t.payload.redirect})},finished:function(e,t){return N({},e,{requesting:!1,success:!0,finished:!0,message:t.payload.message})},error:function(e,t){return N({},e,{requesting:!1,finished:!0,success:!1,failed:!0,message:t.payload.error})},reset:function(e){return{requesting:!1,finished:!1,success:!1,failed:!1,message:"",redirect:""}}}}),S=k.reducer,P=k.actions,q=P.requested,D=P.finished,x=P.error,C=P.reset,A=S;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={token:"",id:"",loggedIn:!1},F=Object(m.b)({name:"auth",initialState:I,reducers:{authenticated:function(e,t){return U({},t.payload,{loggedIn:!0})},cleared:function(e){return U({},I)}}}),L=F.actions,T=F.reducer,B=L.authenticated,G=L.cleared,M=function(){return function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G()),t(D({message:"You've logged out"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=T,H=function(){var e=Object(u.b)(),t=Object(i.f)(),n=Object(u.c)((function(e){return e.Auth})).loggedIn;return a.a.createElement("div",{className:"navbar base"},a.a.createElement("nav",{className:"nav"},a.a.createElement("h3",{className:"logo"},a.a.createElement(o.b,{to:"/"},"DNB")),Object(u.c)((function(e){return e.Menu.menuOpen}))?a.a.createElement("span",{className:"close-menu",onClick:function(){e(h()),setTimeout((function(){t.push("/home")}),500)}},a.a.createElement("div",{className:"close-icon-base"})):a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"actions"},a.a.createElement("li",{className:"actions-play"},a.a.createElement(o.b,{to:"/play"},"PLAY GAME")),a.a.createElement("li",{className:"actions-scores"},a.a.createElement(o.b,{to:"/scores"},"SCORES"))),a.a.createElement("ul",{className:"user-actions"},n?a.a.createElement("li",{className:"logout"},a.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return e(M())}},"LOGOUT")):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"login"},a.a.createElement(o.b,{to:"/login"},"LOGIN")),a.a.createElement("li",{className:"register"},a.a.createElement(o.b,{to:"/register"},"REGISTER")))),a.a.createElement("span",{className:"menu",onClick:function(){return e(v())}},a.a.createElement("div",{className:"open-icon-base"},a.a.createElement("div",{className:"icon-row"}))))))},W=(n(176),n(23)),V=function e(){Object(W.a)(this,e)};V.serverUrl="production"==(V.environment="development")?"https://itweb-g12-a3-api.herokuapp.com":"staging"==V.environment?"https://itweb-g12-a3-api-staging.herokuapp.com":"http://localhost:8080",V.socketUrl="production"==V.environment?"ws://itweb-g12-a3-api.herokuapp.com":"staging"==V.environment?"ws://itweb-g12-a3-api-staging.herokuapp.com":"ws://localhost:8080";var J=function(){return a.a.createElement("div",{className:"home-page"},a.a.createElement("div",{className:"container"},a.a.createElement("h1",{className:"heading"},"Home"),a.a.createElement("div",{className:"content"},a.a.createElement("p",null,"development"),a.a.createElement("p",null,V.serverUrl),a.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam enim tenetur similique aspernatur, impedit odit quisquam dolor temporibus numquam dolores nam, amet, explicabo aliquid. Illum mollitia beatae qui vel asperiores!"),a.a.createElement("p",null,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam nemo sapiente recusandae eligendi, provident molestiae placeat laborum est neque? Accusamus, eaque veritatis doloremque possimus necessitatibus impedit nemo quis porro eligendi."))))},$=(n(177),function(){var e=Object(u.c)((function(e){return e.Menu})).menuOpen,t=Object(u.b)(),n=function(){return t(h())},r=Object(u.c)((function(e){return e.Auth})).loggedIn;return a.a.createElement("div",{className:"menu-content",style:{opacity:e?1:0,visibility:e?"visible":"hidden"}},a.a.createElement("div",{className:"container"},a.a.createElement("ul",{className:"actions"},a.a.createElement("li",{className:"actions-play"},a.a.createElement(o.b,{to:"/play",onClick:function(){return n()}},"PLAY GAME")),a.a.createElement("li",{className:"actions-scores"},a.a.createElement(o.b,{to:"/scores",onClick:function(){return n()}},"SCORES"))),a.a.createElement("div",{className:"divider"}),a.a.createElement("ul",{className:"user-actions"},r?a.a.createElement("li",{className:"logout"},a.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){t(M()),n()}},"LOGOUT")):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"login"},a.a.createElement(o.b,{to:"/login",onClick:function(){return n()}},"LOGIN")),a.a.createElement("li",{className:"register"},a.a.createElement(o.b,{to:"/register",onClick:function(){return n()}},"REGISTER"))))))}),z=(n(178),n(15)),K=n(21),Q=(n(307),n(45)),X=n.n(Q),Z=function e(){Object(W.a)(this,e)};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Z.url=V.serverUrl,Z.registerUser=function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post(Z.url+"/register",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response||400!==e.t0.response.status||!e.t0.response.data.status){e.next=11;break}throw e.t0.response.data.status;case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Z.login=function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post(Z.url+"/authenticate",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response||400!==e.t0.response.status||!e.t0.response.data.status){e.next=11;break}throw e.t0.response.data.status;case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var te=Object(m.b)({name:"register",initialState:{registering:!1,registered:!1,error:""},reducers:{requested:function(e){return ee({},e,{registering:!0,error:""})},success:function(e){return ee({},e,{registered:!0,registering:!1,error:""})},failed:function(e,t){return ee({},e,{registering:!1,registered:!1,error:t.payload})},reset:function(e){return{registered:!1,registering:!1,error:""}}}}),ne=te.actions,re=te.reducer,ae=ne.requested,ce=ne.success,se=ne.failed,ie=(ne.reset,re),oe=K.object().shape({username:K.string().required("Username is required").min(2,"Your Username is too short"),email:K.string().required("Email is required").email("Your email is invalid"),password:K.string().required("Password is required").min(8,"Your password is too short")}),ue=function(){var e=Object(u.b)(),t=Object(i.f)();return a.a.createElement("div",{className:"register-page"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"heading"},a.a.createElement("h4",{className:"register-title"},"Register"),a.a.createElement("span",{className:"register-close"},a.a.createElement("span",{className:"close-menu",onClick:function(){return t.goBack()}},a.a.createElement("div",{className:"close-icon-base"})))),a.a.createElement(z.c,{initialValues:{username:"",email:"",password:""},validationSchema:oe,onSubmit:function(t){var n,r,a;e((n=t.username,r=t.email,a=t.password,function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q({redirect:"/login"})),t(ae()),e.prev=2,e.next=5,Z.registerUser({username:n,email:r,password:a});case 5:e.sent.id?(t(D({message:"User was successfully registered"})),t(ce())):(t(x({error:"Try again later"})),t(se("Something wen't wrong"))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(x({error:e.t0.toString()})),t(se(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()))}},(function(e){var t=e.touched,n=e.errors;return a.a.createElement(z.b,{className:"register-form"},a.a.createElement("div",{className:"username"},a.a.createElement(z.a,{name:"username",placeholder:"Username"}),n.username&&t.username?a.a.createElement("div",{className:"error"},n.username):null),a.a.createElement("div",{className:"email"},a.a.createElement(z.a,{name:"email",type:"email",placeholder:"Email"}),n.email&&t.email?a.a.createElement("div",{className:"error"},n.email):null),a.a.createElement("div",{className:"password"},a.a.createElement(z.a,{name:"password",placeholder:"Password",type:"password"}),n.password&&t.password?a.a.createElement("div",{className:"error"},n.password):null),a.a.createElement("button",{type:"submit"},"REGISTER"))}))))};n(324);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de,pe={loggingIn:!1,loggedIn:!1,error:""},fe=Object(m.b)({name:"login",initialState:pe,reducers:{requested:function(e){return me({loggingIn:!0},pe)},success:function(e){return me({loggedIn:!0},pe)},failure:function(e,t){return me({error:t.payload.error},pe)},reset:function(e){return me({},pe)}}}),be=fe.actions,ge=fe.reducer,ve=be.requested,he=be.success,Oe=be.failure,Ee=(be.reset,ge),we=K.object().shape({username:K.string().required("Username is required").min(2,"Your Username is too short"),password:K.string().required("Password is required").min(8,"Your password is too short")}),ye=function(){var e=Object(u.b)(),t=Object(i.f)();return a.a.createElement("div",{className:"login-page"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"heading"},a.a.createElement("h4",{className:"login-title"},"Login"),a.a.createElement("span",{className:"login-close"},a.a.createElement("span",{className:"close-menu",onClick:function(){return t.goBack()}},a.a.createElement("div",{className:"close-icon-base"})))),a.a.createElement("div",{className:"login-errors"}),a.a.createElement(z.c,{initialValues:{username:"",password:""},validationSchema:we,onSubmit:function(t){var n,r;e((n=t.username,r=t.password,function(){var e=Object(y.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q({redirect:"/home"})),t(ve()),e.prev=2,e.next=5,Z.login({username:n,password:r});case 5:a=e.sent,t(B(a)),t(D({message:"You were logged in"})),t(he()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t(x({error:e.t0.toString()})),t(Oe(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()))}},(function(e){var t=e.touched,n=e.errors;return a.a.createElement(z.b,{className:"login-form"},a.a.createElement("div",{className:"username"},a.a.createElement(z.a,{name:"username",placeholder:"Username"}),n.username&&t.username?a.a.createElement("div",{className:"error"},n.username):null),a.a.createElement("div",{className:"password"},a.a.createElement(z.a,{name:"password",placeholder:"Password",type:"password"}),n.password&&t.password?a.a.createElement("div",{className:"error"},n.password):null),a.a.createElement("button",{type:"submit"},"LOGIN"))}))))},je=(n(325),n(326),{count:0}),Ne=Object(m.b)({name:"counter",initialState:je,reducers:{increment:function(e){return{count:e.count+1}},reset:function(e){return je}}}),ke=Ne.actions,Se=Ne.reducer,Pe=ke.increment,qe=ke.reset,De=Se,xe=n(24),Ce=Object(m.b)({name:"activeField",initialState:{field:0},reducers:{setActiveField:function(e,t){return{field:t.payload}}}}),Ae=Ce.actions,Re=Ce.reducer,Ue=Ae.setActiveField,Ie=Re,Fe=Object(m.b)({name:"nBack",initialState:{n:1},reducers:{set:function(e){return{n:e.n+1}}}}),Le=Fe.actions,Te=Fe.reducer,Be=Le.set,Ge=Te,Me=Object(m.b)({name:"activeSound",initialState:{sound:0},reducers:{setActiveSound:function(e,t){return{sound:t.payload}}}}),Ye=Me.actions,He=Me.reducer,We=function(e){return function(){var t=Object(y.a)(w.a.mark((function t(n){var r,a,c,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Ye.setActiveSound(e)),"speechSynthesis"in window&&(r=window.speechSynthesis,a=/^en(-[a-z]{2})?$/i,c=r.getVoices().filter((function(e){return a.test(e.lang)}))[0],console.warn(c),console.warn(r.getVoices()),(s=new SpeechSynthesisUtterance("ABCDEFGHIJKLMNOPQRSTUVXYZ1234567890"[e-1])).voice=c,s.pitch=1,s.rate=1,s.volume=1,r.speak(s));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ve=Object(m.b)({name:"rounds",initialState:{rounds:[]},reducers:{add:function(e,t){return{rounds:[].concat(Object(xe.a)(e.rounds),[t.payload])}}}}),Je=Ve.actions,$e=Ve.reducer,ze=Je.add,Ke=$e,Qe=function(e){return function(){var t=Object(y.a)(w.a.mark((function t(n,r){var a,c,s,i,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r(),c=a.Counter.count,s=a.NBack.n,i=Math.floor(Math.random()*Math.pow(e,2))+1,o=Math.floor(Math.random()*Math.pow(e,2))+1,n(ze({round:c,field:i,sound:o})),n(Ue(i)),n(We(o)),Math.floor(c/10)+1!==s&&n(Be());case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Xe=n(160),Ze=n.n(Xe);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e.Running="running",e.Finished="finished"}(de||(de={}));var et={session:"",state:de.Finished,widthHeight:3,timerDuration:5},tt=Object(m.b)({name:"settings",initialState:et,reducers:{start:function(e,t){return{widthHeight:t.payload.widthHeight,timerDuration:t.payload.timerDuration,state:de.Running,session:t.payload.session}},finished:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},et)}}}),nt=tt.actions,rt=tt.reducer,at=nt.start,ct=(nt.finished,rt),st=(n(329),n(330),function(e){var t=e.index+1,n=Object(u.c)((function(e){return e.ActiveField})).field,r=Object(u.c)((function(e){return e.Counter})).count,c=n===t;return a.a.createElement("div",{key:e.index+r,className:c?"field active":"field"},t)}),it=function(e){for(var t=[],n=0,r=0;r<e.rows*e.columns;r++)n++,t.push(n);return a.a.createElement("div",{className:"grid"},a.a.createElement("div",{className:"container",style:{gridTemplateRows:"repeat(".concat(e.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(e.columns,", 1fr)")}},t.map((function(e,t){return a.a.createElement(st,{index:t})}))))},ot=(n(331),n(161)),ut=n(162),lt=n.n(ut),mt=new function e(){var t=this;Object(W.a)(this,e),this.url=void 0,this.getScores=Object(y.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.a.get(t.url+"/scores/10");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),this.url=V.serverUrl};function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={scores:[],gettingScores:!1,gotScores:!1,error:""},bt=Object(m.b)({name:"scores",initialState:ft,reducers:{requested:function(e){return pt({},ft,{gettingScores:!1,scores:e.scores})},success:function(e,t){return pt({},ft,{gotScores:!0,scores:t.payload.scores})},failure:function(e,t){return pt({},ft,{error:t.payload.error,scores:e.scores})}}}),gt=bt.actions,vt=bt.reducer,ht=function(){return function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(gt.requested()),e.prev=1,e.next=4,mt.getScores();case 4:n=e.sent,t(gt.success({scores:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(gt.failure({error:toString()}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Ot=function(){function e(){Object(W.a)(this,e)}return Object(ot.a)(e,null,[{key:"openSocket",value:function(){this.socket=lt.a.connect(this.url)}},{key:"addGame",value:function(e){this.socket.emit("add-score",e)}},{key:"integrateCallbacks",value:function(e){this.socket.on("score-updated",(function(t){e(ht())}))}}]),e}();Ot.url=V.serverUrl,Ot.socket=void 0;var Et={score:0},wt=Object(m.b)({name:"score",initialState:Et,reducers:{add:function(e,t){return{score:t.payload}},reset:function(e){return Et}}}),yt=wt.actions,jt=wt.reducer,Nt=(yt.reset,jt),kt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.FieldAttempt.attempts})),n=Object(u.c)((function(e){return e.SoundAttempt.attempts})),c=Object(u.c)((function(e){return e.Score})).score;return Object(r.useEffect)((function(){var r,a=0;t.forEach((function(e){e.success?a+=10*e.nback:a-=10*e.nback})),n.forEach((function(e){e.success?a+=10*e.nback:a-=10*e.nback})),e((r=a,function(){var e=Object(y.a)(w.a.mark((function e(t,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n(),t(yt.add(r)),a.Auth.loggedIn&&a.Settings.session,a.Auth.id&&(console.log("In here"),Ot.addGame({jwt:a.Auth.token,score:r,session:a.Settings.session}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))}),[t,n]),a.a.createElement("div",null,"Score: ",c)},St=(n(363),function(e){return a.a.createElement("div",{className:"progress-bar"},1==e.indeterminate?a.a.createElement("div",{className:"indeterminate"}):0==e.indeterminate?a.a.createElement("div",{className:"determinate",style:{width:"".concat(e.progress,"%")}}):1==e.timed?a.a.createElement("div",{className:"timed",style:{width:"".concat(e.progress,"%"),transition:"width ".concat(e.duration,"s linear")}}):null)}),Pt=St,qt={attempts:[]},Dt=Object(m.b)({name:"field-attempt",initialState:qt,reducers:{add:function(e,t){var n=t.payload,r=n.round,a=n.nback,c=n.success,s=e.attempts.find((function(e){return e.round==r}));if(null==s||0==s.attempted)return{attempts:[].concat(Object(xe.a)(e.attempts),[{round:r,nback:a,success:c,attempted:!0}])}},reset:function(e){return qt}}}),xt=Dt.actions,Ct=Dt.reducer,At=(xt.reset,Ct),Rt={attempts:[]},Ut=Object(m.b)({name:"sound-attempt",initialState:Rt,reducers:{add:function(e,t){var n=t.payload,r=n.round,a=n.nback,c=n.success,s=e.attempts.find((function(e){return e.round==r}));if(null==s||0==s.attempted)return{attempts:[].concat(Object(xe.a)(e.attempts),[{round:r,nback:a,success:c,attempted:!0}])}},reset:function(e){return Rt}}}),It=Ut.actions,Ft=Ut.reducer,Lt=(It.reset,Ft),Tt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.Settings})),n=t.state,r=t.widthHeight,c=t.timerDuration,s=Object(u.c)((function(e){return e.Counter.count})),i=Object(u.c)((function(e){return e.NBack})).n,o=s%2==0?0:100;return n==de.Finished?a.a.createElement("div",{className:"game-finished"},a.a.createElement("div",{className:"game-banner"},a.a.createElement("span",{className:"game-title"},"Play the game"),a.a.createElement("button",{className:"game-play-button",onClick:function(){return e(function(e,t){return function(){var n=Object(y.a)(w.a.mark((function n(r){var a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=Ze.a.v4(),r(at({widthHeight:e,timerDuration:t,session:a})),r(qe()),setInterval((function(){r(Pe()),r(Qe(e))}),1e3*t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(2,3))}},"Play"))):a.a.createElement("div",{className:"game-running"},a.a.createElement("div",{className:"counter"},"Counter ",a.a.createElement("span",{className:"counter-letter"},"N"),"=",i),a.a.createElement("div",{className:"grid"},a.a.createElement(it,{rows:r,columns:r})),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{className:"place",onClick:function(){return e(function(){var e=Object(y.a)(w.a.mark((function e(t,n){var r,a,c,s,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.ActiveField.field,c=r.Counter.count,s=r.NBack.n,(i=r.Round.rounds.find((function(e){return e.round==c-s})))&&t(xt.add({round:c,nback:s,success:i.field==a}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},"Place"),a.a.createElement("button",{className:"sound",onClick:function(){return e(function(){var e=Object(y.a)(w.a.mark((function e(t,n){var r,a,c,s,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.ActiveSound.sound,c=r.Counter.count,s=r.NBack.n,(i=r.Round.rounds.find((function(e){return e.round==c-s})))&&t(It.add({round:c,nback:s,success:i.sound==a}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},"Sound")),a.a.createElement("div",{className:"progress"},a.a.createElement(Pt,{timed:!0,duration:c-.2,progress:o})),a.a.createElement("div",{className:"score"},a.a.createElement(kt,null)))},Bt=function(){return a.a.createElement("div",{className:"game-page"},a.a.createElement("div",{className:"container"},a.a.createElement(Tt,null)))},Gt=(n(364),function(){var e=Object(u.b)();Object(r.useEffect)((function(){e(ht()),Ot.integrateCallbacks(e)}),[]);var t=Object(u.c)((function(e){return e.Scores})).scores;return a.a.createElement("div",{className:"scores-page"},t.map((function(e,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"score",key:n,style:{margin:"0 auto"}},a.a.createElement("span",{className:"ranking"},n+1),a.a.createElement("span",{className:"amount"},e.score),a.a.createElement("span",{className:"username"},e.username)),t.length-1!==n?a.a.createElement("div",{className:"divider"}):null)})))}),Mt=function(){return Ot.openSocket(),a.a.createElement("div",{className:"body-container"},a.a.createElement($,null),a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/play"},a.a.createElement(Bt,null)),a.a.createElement(i.a,{path:"/scores"},a.a.createElement(Gt,null)),a.a.createElement(i.a,{path:"/login"},a.a.createElement(ye,null)),a.a.createElement(i.a,{path:"/register"},a.a.createElement(ue,null)),a.a.createElement(i.a,{path:"/*"},a.a.createElement(J,null))))},Yt=n(18),Ht=Object(Yt.combineReducers)({Menu:O,Register:ie,Request:A,Login:Ee,Auth:Y,Settings:ct,ActiveField:Ie,ActiveSound:He,Counter:De,Round:Ke,NBack:Ge,FieldAttempt:At,SoundAttempt:Lt,Score:Nt,Scores:vt}),Wt=Object(xe.a)(Object(m.c)()),Vt=Object(m.a)({reducer:Ht,middleware:Wt,devTools:!1}),Jt=(n(365),function(){var e=Object(u.b)(),t=Object(i.f)(),n=Object(u.c)((function(e){return e.Request})),c=function(){setTimeout((function(){e(C())}),5e3)};Object(r.useEffect)((function(){n.finished&&n.success?(setTimeout((function(){t.push(n.redirect)}),1e3),c()):n.finished&&n.failed&&c()}),[n.success]);var s=function(){return a.a.createElement("p",{className:"text"},n.message)};return n.requesting||n.finished||n.failed?a.a.createElement("div",{className:"progress"},n.requesting?a.a.createElement("div",{className:"in-progress"},a.a.createElement(St,null)):n.finished&&!n.failed?a.a.createElement("div",{className:"finished"},s()):n.failed?a.a.createElement("div",{className:"failed"},s()):null):null}),$t=function(){return a.a.createElement("div",{className:"react-root"},a.a.createElement(u.a,{store:Vt},a.a.createElement(o.a,null,a.a.createElement("div",{className:"root-container"},a.a.createElement("div",{className:"root-navbar"},a.a.createElement(H,null)),a.a.createElement("div",{className:"root-body"},a.a.createElement(Mt,null)),a.a.createElement("div",{className:"root-progress"},a.a.createElement(Jt,null))))))},zt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Kt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(a.a.createElement($t,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/DualNBack",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/DualNBack","/service-worker.js");zt?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Kt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Kt(t,e)}))}}()}},[[163,1,2]]]);
//# sourceMappingURL=main.7e967992.chunk.js.map